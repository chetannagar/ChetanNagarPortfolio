---
import light from '/public/icons/light.svg'
import dark from '/public/icons/dark.svg'
---

<nav class="flex flex-row justify-center items-center max-w-lg mx-4 my-0 px-4 gap-4 dark:text-light-cream">
    <ul class="flex flex-row gap-4 font-poppins font-semibold text-lg">
        <li><a href="">About</a></li>
        <li><a href="">Projects</a></li>
        <li><a href="">Contact</a></li>
    </ul>
    <button class="max-w-8 aspect-square" data-dark-mode-btn aria-label="Toggle Dark Mode" role="button">
        <img data-light-img class="hidden max-w-full aspect-square" src={light.src} alt="light-logo">
        <img data-dark-img class="hidden max-w-full aspect-square" src={dark.src} alt="dark-logo">
    </button>
</nav>

<script>
    import { RootElement, toggleIcons } from "../util/themeUtils.js";

    const button = document.querySelector('[data-dark-mode-btn]');
    const lightImg = button?.querySelector('[data-light-img]');
    const darkImg = button?.querySelector('[data-dark-img]');

    RootElement.html?.setAttribute('data-mode', RootElement.initialTheme);
    toggleIcons(lightImg, darkImg, RootElement.initialTheme);

    button?.addEventListener('click', () => {
        const newTheme = RootElement.html?.getAttribute('data-mode') === 'dark' ? 'light' : 'dark';
        RootElement.html?.setAttribute('data-mode', newTheme);
        toggleIcons(lightImg, darkImg, newTheme);
        localStorage.setItem('theme', newTheme);
    });
</script>
